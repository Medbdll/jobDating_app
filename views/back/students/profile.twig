{% extends "layout.twig" %}

{% block content %}
<div class="w-full max-w-4xl mx-auto">
    <!-- Header -->
    <div class="glass-effect rounded-2xl p-8 mb-8 fade-in">
        <div class="flex justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-800">Mon Profil</h1>
            <a href="/student/dashboard" class="btn-primary px-6 py-3 text-white font-medium rounded-lg hover:shadow-lg transition-all duration-300">
                <i class="fas fa-arrow-left mr-2"></i>
                Retour au dashboard
            </a>
        </div>
    </div>

    <!-- Flash Messages -->
    {% if flash_messages is not empty %}
        {% for type, message in flash_messages %}
            <div class="alert mb-6 p-4 rounded-lg {% if type == 'success' %}bg-green-100 text-green-700 border border-green-200{% elseif type == 'error' %}bg-red-100 text-red-700 border border-red-200{% else %}bg-blue-100 text-blue-700 border border-blue-200{% endif %}">
                <div class="flex items-center">
                    <i class="fas {% if type == 'success' %}fa-check-circle{% elseif type == 'error' %}fa-exclamation-circle{% else %}fa-info-circle{% endif %} mr-3"></i>
                    <span>{{ message }}</span>
                </div>
            </div>
        {% endfor %}
    {% endif %}

    <!-- Profile Form -->
    <div class="glass-effect rounded-2xl p-8 fade-in">
        <form method="POST" action="/student/dashboard/profile" class="space-y-8">
            <!-- Personal Information -->
            <div>
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-user mr-3 text-indigo-500"></i>
                    Informations personnelles
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nom complet</label>
                        <input type="text" value="{{ student.name }}" readonly class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-600">
                        <p class="text-xs text-gray-500 mt-1">Le nom ne peut pas être modifié</p>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" value="{{ student.email }}" readonly class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-600">
                        <p class="text-xs text-gray-500 mt-1">L'email ne peut pas être modifié</p>
                    </div>
                </div>
            </div>

            <!-- Academic Information -->
            <div>
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-graduation-cap mr-3 text-indigo-500"></i>
                    Informations académiques
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="promotion" class="block text-sm font-medium text-gray-700 mb-2">Promotion</label>
                        <select id="promotion" name="promotion" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                            <option value="2023-2024" {% if student.promotion == '2023-2024' %}selected{% endif %}>2023-2024</option>
                            <option value="2024-2025" {% if student.promotion == '2024-2025' %}selected{% endif %}>2024-2025</option>
                            <option value="2025-2026" {% if student.promotion == '2025-2026' %}selected{% endif %}>2025-2026</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="specialization" class="block text-sm font-medium text-gray-700 mb-2">Spécialisation</label>
                        <input type="text" id="specialization" name="specialization" value="{{ student.specialization }}" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                               placeholder="Ex: Informatique, Génie civil, Marketing...">
                    </div>
                </div>
            </div>

            <!-- Professional Information -->
            <div>
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-briefcase mr-3 text-indigo-500"></i>
                    Informations professionnelles
                </h2>
                
                <div class="space-y-6">
                    <div>
                        <label for="bio" class="block text-sm font-medium text-gray-700 mb-2">Biographie</label>
                        <textarea id="bio" name="bio" rows="4" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none"
                                  placeholder="Parlez-nous de vous, de vos objectifs professionnels...">{{ student.bio }}</textarea>
                        <p class="text-xs text-gray-500 mt-1">Décrivez votre parcours et vos objectifs</p>
                    </div>
                    
                    <div>
                        <label for="skills" class="block text-sm font-medium text-gray-700 mb-2">Compétences</label>
                        <input type="text" id="skills" name="skills" value="{{ student.skills }}" 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                               placeholder="Ex: PHP, JavaScript, MySQL, React...">
                        <p class="text-xs text-gray-500 mt-1">Séparez les compétences par des virgules</p>
                    </div>
                </div>
            </div>

            <!-- Online Presence -->
            <div>
                <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                    <i class="fas fa-globe mr-3 text-indigo-500"></i>
                    Présence en ligne
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="linkedin_url" class="block text-sm font-medium text-gray-700 mb-2">LinkedIn</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fab fa-linkedin text-gray-400"></i>
                            </div>
                            <input type="url" id="linkedin_url" name="linkedin_url" value="{{ student.linkedin_url }}" 
                                   class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="https://linkedin.com/in/votreprofil">
                        </div>
                    </div>
                    
                    <div>
                        <label for="portfolio_url" class="block text-sm font-medium text-gray-700 mb-2">Portfolio</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-external-link-alt text-gray-400"></i>
                            </div>
                            <input type="url" id="portfolio_url" name="portfolio_url" value="{{ student.portfolio_url }}" 
                                   class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                                   placeholder="https://votreportfolio.com">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex justify-end space-x-4 pt-6 border-t border-gray-200">
                <a href="/student/dashboard" class="px-6 py-3 bg-gray-200 text-gray-700 font-medium rounded-lg hover:bg-gray-300 transition-colors duration-300">
                    Annuler
                </a>
                <button type="submit" class="btn-primary px-6 py-3 text-white font-medium rounded-lg hover:shadow-lg transition-all duration-300">
                    <i class="fas fa-save mr-2"></i>
                    Enregistrer les modifications
                </button>
            </div>
        </form>
    </div>
</div>

<style>
.fade-in {
    animation: fadeIn 0.5s ease-out;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
</style>
{% endblock %}
